


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Transformation3D</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.esri.core.geometry</a>
</div>

<h1>Coverage Summary for Class: Transformation3D (com.esri.core.geometry)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Transformation3D</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/14)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/138)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; Copyright 1995-2015 Esri
&nbsp;
&nbsp;   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp;   you may not use this file except in compliance with the License.
&nbsp;   You may obtain a copy of the License at
&nbsp;
&nbsp;       http://www.apache.org/licenses/LICENSE-2.0
&nbsp;
&nbsp;   Unless required by applicable law or agreed to in writing, software
&nbsp;   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp;   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp;   See the License for the specific language governing permissions and
&nbsp;   limitations under the License.
&nbsp;
&nbsp; For additional information, contact:
&nbsp; Environmental Systems Research Institute, Inc.
&nbsp; Attn: Contracts Dept
&nbsp; 380 New York Street
&nbsp; Redlands, California, USA 92373
&nbsp;
&nbsp; email: contracts@esri.com
&nbsp; */
&nbsp;
&nbsp;package com.esri.core.geometry;
&nbsp;
&nbsp;/**
&nbsp; * The 3D affine transformation class.
&nbsp; * 
&nbsp; * We use matrices for transformations of the vectors as rows. That means the
&nbsp; * math expressions on the Geometry matrix operations should be writen like
&nbsp; * this: v&#39; = v * M1 * M2 * M3 = ( (v * M1) * M2 ) * M3, where v is a vector, Mn
&nbsp; * are the matrices. This is equivalent to the following line of code:
&nbsp; * ResultVector = (M1.Mul(M2).Mul(M3)).Transform(Vector)
&nbsp; */
&nbsp;final public class Transformation3D {
&nbsp;
&nbsp;	public double xx, yx, zx, xd, xy, yy, zy, yd, xz, yz, zz, zd;
&nbsp;
<b class="nc">&nbsp;	public Transformation3D() {</b>
&nbsp;
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Sets all elements to 0, thus producing and invalid transformation.
&nbsp;	 */
&nbsp;	public void setZero() {
<b class="nc">&nbsp;		xx = 0.0;</b>
<b class="nc">&nbsp;		yx = 0.0;</b>
<b class="nc">&nbsp;		zx = 0.0;</b>
<b class="nc">&nbsp;		xy = 0.0;</b>
<b class="nc">&nbsp;		yy = 0.0;</b>
<b class="nc">&nbsp;		zy = 0.0;</b>
<b class="nc">&nbsp;		xz = 0.0;</b>
<b class="nc">&nbsp;		yz = 0.0;</b>
<b class="nc">&nbsp;		zz = 0.0;</b>
<b class="nc">&nbsp;		xd = 0.0;</b>
<b class="nc">&nbsp;		yd = 0.0;</b>
<b class="nc">&nbsp;		zd = 0.0;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void setScale(double scaleX, double scaleY, double scaleZ) {
<b class="nc">&nbsp;		xx = scaleX;</b>
<b class="nc">&nbsp;		yx = 0.0;</b>
<b class="nc">&nbsp;		zx = 0.0;</b>
<b class="nc">&nbsp;		xy = 0.0;</b>
<b class="nc">&nbsp;		yy = scaleY;</b>
<b class="nc">&nbsp;		zy = 0.0;</b>
<b class="nc">&nbsp;		xz = 0.0;</b>
<b class="nc">&nbsp;		yz = 0.0;</b>
<b class="nc">&nbsp;		zz = scaleZ;</b>
<b class="nc">&nbsp;		xd = 0.0;</b>
<b class="nc">&nbsp;		yd = 0.0;</b>
<b class="nc">&nbsp;		zd = 0.0;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void setTranslate(double deltax, double deltay, double deltaz) {
<b class="nc">&nbsp;		xx = 1.0;</b>
<b class="nc">&nbsp;		yx = 0.0;</b>
<b class="nc">&nbsp;		zx = 0.0;</b>
<b class="nc">&nbsp;		xy = 0.0;</b>
<b class="nc">&nbsp;		yy = 1.0;</b>
<b class="nc">&nbsp;		zy = 0.0;</b>
<b class="nc">&nbsp;		xz = 0.0;</b>
<b class="nc">&nbsp;		yz = 0.0;</b>
<b class="nc">&nbsp;		zz = 1.0;</b>
<b class="nc">&nbsp;		xd = deltax;</b>
<b class="nc">&nbsp;		yd = deltay;</b>
<b class="nc">&nbsp;		zd = deltaz;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void translate(double deltax, double deltay, double deltaz) {
<b class="nc">&nbsp;		xd += deltax;</b>
<b class="nc">&nbsp;		yd += deltay;</b>
<b class="nc">&nbsp;		zd += deltaz;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Transforms an envelope. The result is the bounding box of the transformed
&nbsp;	 * envelope.
&nbsp;	 */
&nbsp;	public Envelope3D transform(Envelope3D env) {
&nbsp;
<b class="nc">&nbsp;		if (env.isEmpty())</b>
<b class="nc">&nbsp;			return env;</b>
&nbsp;
<b class="nc">&nbsp;		Point3D[] buf = new Point3D[8];</b>
<b class="nc">&nbsp;		env.queryCorners(buf);</b>
&nbsp;
<b class="nc">&nbsp;		transform(buf, 8, buf);</b>
<b class="nc">&nbsp;		env.setFromPoints(buf);</b>
<b class="nc">&nbsp;		return env;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void transform(Point3D[] pointsIn, int count, Point3D[] pointsOut) {
<b class="nc">&nbsp;		for (int i = 0; i &lt; count; i++) {</b>
<b class="nc">&nbsp;			Point3D res = new Point3D();</b>
<b class="nc">&nbsp;			Point3D src = pointsIn[i];</b>
<b class="nc">&nbsp;			res.x = xx * src.x + xy * src.y + xz * src.z + xd;</b>
<b class="nc">&nbsp;			res.y = yx * src.x + yy * src.y + yz * src.z + yd;</b>
<b class="nc">&nbsp;			res.z = zx * src.x + zy * src.y + zz * src.z + zd;</b>
<b class="nc">&nbsp;			pointsOut[i] = res;</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	public Point3D transform(Point3D src) {
<b class="nc">&nbsp;		Point3D res = new Point3D();</b>
<b class="nc">&nbsp;		res.x = xx * src.x + xy * src.y + xz * src.z + xd;</b>
<b class="nc">&nbsp;		res.y = yx * src.x + yy * src.y + yz * src.z + yd;</b>
<b class="nc">&nbsp;		res.z = zx * src.x + zy * src.y + zz * src.z + zd;</b>
<b class="nc">&nbsp;		return res;</b>
&nbsp;	}
&nbsp;
&nbsp;	public void transform(Point3D[] points, int start, int count) {
<b class="nc">&nbsp;		int n = Math.min(points.length, start + count);</b>
<b class="nc">&nbsp;		for (int i = start; i &lt; n; i++) {</b>
<b class="nc">&nbsp;			Point3D res = new Point3D();</b>
<b class="nc">&nbsp;			Point3D src = points[i];</b>
<b class="nc">&nbsp;			res.x = xx * src.x + xy * src.y + xz * src.z + xd;</b>
<b class="nc">&nbsp;			res.y = yx * src.x + yy * src.y + yz * src.z + yd;</b>
<b class="nc">&nbsp;			res.z = zx * src.x + zy * src.y + zz * src.z + zd;</b>
<b class="nc">&nbsp;			points[i] = res;</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	public void mul(Transformation3D right) {
<b class="nc">&nbsp;		multiply(this, right, this);</b>
&nbsp;	}
&nbsp;
&nbsp;	public void mulLeft(Transformation3D left) {
<b class="nc">&nbsp;		multiply(left, this, this);</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Performs multiplication of matrices a and b and places result into
&nbsp;	 * result. The a, b, and result could point to same objects. &lt;br&gt;
&nbsp;	 * Equivalent to result = a * b.
&nbsp;	 */
&nbsp;	// static
&nbsp;	public static void multiply(Transformation3D a, Transformation3D b,
&nbsp;			Transformation3D result) {
&nbsp;		double xx, yx, zx;
&nbsp;		double xy, yy, zy;
&nbsp;		double xz, yz, zz;
&nbsp;		double xd, yd, zd;
&nbsp;
<b class="nc">&nbsp;		xx = a.xx * b.xx + a.yx * b.xy + a.zx * b.xz;</b>
<b class="nc">&nbsp;		yx = a.xx * b.yx + a.yx * b.yy + a.zx * b.yz;</b>
<b class="nc">&nbsp;		zx = a.xx * b.zx + a.yx * b.zy + a.zx * b.zz;</b>
<b class="nc">&nbsp;		xy = a.xy * b.xx + a.yy * b.xy + a.zy * b.xz;</b>
<b class="nc">&nbsp;		yy = a.xy * b.yx + a.yy * b.yy + a.zy * b.yz;</b>
<b class="nc">&nbsp;		zy = a.xy * b.zx + a.yy * b.zy + a.zy * b.zz;</b>
<b class="nc">&nbsp;		xz = a.xz * b.xx + a.yz * b.xy + a.zz * b.xz;</b>
<b class="nc">&nbsp;		yz = a.xz * b.yx + a.yz * b.yy + a.zz * b.yz;</b>
<b class="nc">&nbsp;		zz = a.xz * b.zx + a.yz * b.zy + a.zz * b.zz;</b>
<b class="nc">&nbsp;		xd = a.xd * b.xx + a.yd * b.xy + a.zd * b.xz + b.xd;</b>
<b class="nc">&nbsp;		yd = a.xd * b.yx + a.yd * b.yy + a.zd * b.yz + b.yd;</b>
<b class="nc">&nbsp;		zd = a.xd * b.zx + a.yd * b.zy + a.zd * b.zz + b.zd;</b>
&nbsp;
<b class="nc">&nbsp;		result.xx = xx;</b>
<b class="nc">&nbsp;		result.yx = yx;</b>
<b class="nc">&nbsp;		result.zx = zx;</b>
<b class="nc">&nbsp;		result.xy = xy;</b>
<b class="nc">&nbsp;		result.yy = yy;</b>
<b class="nc">&nbsp;		result.zy = zy;</b>
<b class="nc">&nbsp;		result.xz = xz;</b>
<b class="nc">&nbsp;		result.yz = yz;</b>
<b class="nc">&nbsp;		result.zz = zz;</b>
<b class="nc">&nbsp;		result.xd = xd;</b>
<b class="nc">&nbsp;		result.yd = yd;</b>
<b class="nc">&nbsp;		result.zd = zd;</b>
&nbsp;	}
&nbsp;
&nbsp;	/**
&nbsp;	 * Calculates the Inverse transformation.
&nbsp;	 * 
&nbsp;	 * @param src
&nbsp;	 *            The input transformation.
&nbsp;	 * @param result
&nbsp;	 *            The inverse of the input transformation. Throws the
&nbsp;	 *            GeometryException(&quot;math singularity&quot;) exception if the Inverse
&nbsp;	 *            can not be calculated.
&nbsp;	 */
&nbsp;	public static void inverse(Transformation3D src, Transformation3D result) {
<b class="nc">&nbsp;		double det = src.xx * (src.yy * src.zz - src.zy * src.yz) - src.yx</b>
<b class="nc">&nbsp;				* (src.xy * src.zz - src.zy * src.xz) + src.zx</b>
<b class="nc">&nbsp;				* (src.xy * src.yz - src.yy * src.xz);</b>
<b class="nc">&nbsp;		if (det != 0) {</b>
&nbsp;			double xx, yx, zx;
&nbsp;			double xy, yy, zy;
&nbsp;			double xz, yz, zz;
&nbsp;			double xd, yd, zd;
&nbsp;
<b class="nc">&nbsp;			double det_1 = 1.0 / det;</b>
<b class="nc">&nbsp;			xx = (src.yy * src.zz - src.zy * src.yz) * det_1;</b>
<b class="nc">&nbsp;			xy = -(src.xy * src.zz - src.zy * src.xz) * det_1;</b>
<b class="nc">&nbsp;			xz = (src.xy * src.yz - src.yy * src.xz) * det_1;</b>
&nbsp;
<b class="nc">&nbsp;			yx = -(src.yx * src.zz - src.yz * src.zx) * det_1;</b>
<b class="nc">&nbsp;			yy = (src.xx * src.zz - src.zx * src.xz) * det_1;</b>
<b class="nc">&nbsp;			yz = -(src.xx * src.yz - src.yx * src.xz) * det_1;</b>
&nbsp;
<b class="nc">&nbsp;			zx = (src.yx * src.zy - src.zx * src.yy) * det_1;</b>
<b class="nc">&nbsp;			zy = -(src.xx * src.zy - src.zx * src.xy) * det_1;</b>
<b class="nc">&nbsp;			zz = (src.xx * src.yy - src.yx * src.xy) * det_1;</b>
&nbsp;
<b class="nc">&nbsp;			xd = -(src.xd * xx + src.yd * xy + src.zd * xz);</b>
<b class="nc">&nbsp;			yd = -(src.xd * yx + src.yd * yy + src.zd * yz);</b>
<b class="nc">&nbsp;			zd = -(src.xd * zx + src.yd * zy + src.zd * zz);</b>
&nbsp;
<b class="nc">&nbsp;			result.xx = xx;</b>
<b class="nc">&nbsp;			result.yx = yx;</b>
<b class="nc">&nbsp;			result.zx = zx;</b>
<b class="nc">&nbsp;			result.xy = xy;</b>
<b class="nc">&nbsp;			result.yy = yy;</b>
<b class="nc">&nbsp;			result.zy = zy;</b>
<b class="nc">&nbsp;			result.xz = xz;</b>
<b class="nc">&nbsp;			result.yz = yz;</b>
<b class="nc">&nbsp;			result.zz = zz;</b>
<b class="nc">&nbsp;			result.xd = xd;</b>
<b class="nc">&nbsp;			result.yd = yd;</b>
<b class="nc">&nbsp;			result.zd = zd;</b>
<b class="nc">&nbsp;		} else {</b>
<b class="nc">&nbsp;			throw new GeometryException(&quot;math singularity&quot;);</b>
&nbsp;		}
&nbsp;	}
&nbsp;
&nbsp;	public Transformation3D copy() {
<b class="nc">&nbsp;		Transformation3D result = new Transformation3D();</b>
<b class="nc">&nbsp;		result.xx = xx;</b>
<b class="nc">&nbsp;		result.yx = yx;</b>
<b class="nc">&nbsp;		result.zx = zx;</b>
<b class="nc">&nbsp;		result.xy = xy;</b>
<b class="nc">&nbsp;		result.yy = yy;</b>
<b class="nc">&nbsp;		result.zy = zy;</b>
<b class="nc">&nbsp;		result.xz = xz;</b>
<b class="nc">&nbsp;		result.yz = yz;</b>
<b class="nc">&nbsp;		result.zz = zz;</b>
<b class="nc">&nbsp;		result.xd = xd;</b>
<b class="nc">&nbsp;		result.yd = yd;</b>
<b class="nc">&nbsp;		result.zd = zd;</b>
<b class="nc">&nbsp;		return result;</b>
&nbsp;	}
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-02-21 15:02</div>
</div>
</body>
</html>
